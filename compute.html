<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dynamic MCQ Quiz with Immediate Feedback</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f0f4f8;
        padding: 20px;
    }
    .quiz-container {
        background: #fff;
        padding: 30px;
        max-width: 700px;
        margin: auto;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h2 { text-align: center; color: #333; }
    .question { margin-top: 20px; }
    .option {
        margin: 8px 0;
        padding: 8px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .option:hover { background: #e0f0ff; }
    .correct { background-color: #d4edda; border-left: 5px solid #28a745; }
    .wrong { background-color: #f8d7da; border-left: 5px solid #dc3545; }
    input[type="radio"] { margin-right: 10px; }
    button {
        padding: 12px 25px;
        background: #007bff;
        border: none;
        color: white;
        cursor: pointer;
        border-radius: 6px;
        margin-top: 20px;
        display: block;
        width: 100%;
        font-size: 16px;
    }
    button:hover { background: #0056b3; }
    #result {
        margin-top: 25px;
        font-weight: bold;
        font-size: 18px;
        text-align: center;
    }
</style>
</head>

<body>

<div class="quiz-container">
    <h2>Dynamic MCQ Quiz</h2>
    <div id="quiz">Loading questions...</div>
    <div id="result"></div>
</div>

<script>
    let mcqs = [];

    fetch("compute.json")
        .then(res => res.json())
        .then(data => {
            mcqs = data;
            loadQuiz();
        })
        .catch(err => {
            document.getElementById("quiz").innerHTML = "Error loading MCQs.";
            console.error(err);
        });

    function loadQuiz() {
        const quizDiv = document.getElementById("quiz");
        quizDiv.innerHTML = "";
        mcqs.forEach((q, idx) => {
            const questionDiv = document.createElement("div");
            questionDiv.classList.add("question");
            questionDiv.innerHTML = `<h3>${idx + 1}. ${q.question}</h3>`;
            
            q.options.forEach((opt, i) => {
                const optionDiv = document.createElement("div");
                optionDiv.classList.add("option");
                optionDiv.innerHTML = `<input type="radio" name="q${idx}" value="${i}"> ${opt}`;
                
                optionDiv.addEventListener("click", function() {
                    const selected = questionDiv.querySelector(`input[name="q${idx}"]:checked`);
                    if (!selected) return;

                    // Disable all options
                    const options = questionDiv.querySelectorAll(".option input");
                    options.forEach(inp => inp.disabled = true);

                    // Add correct/wrong styling
                    questionDiv.querySelectorAll(".option").forEach((optEl, optIdx) => {
                        if (optIdx === q.answer) {
                            optEl.classList.add("correct");
                        }
                        if (optIdx === parseInt(selected.value) && selected.value != q.answer) {
                            optEl.classList.add("wrong");
                        }
                    });

                    updateScore();
                });

                questionDiv.appendChild(optionDiv);
            });

            quizDiv.appendChild(questionDiv);
        });
    }

    function updateScore() {
        let score = 0;
        mcqs.forEach((q, idx) => {
            const questionDiv = document.querySelectorAll(".question")[idx];
            const selected = questionDiv.querySelector(`input[name="q${idx}"]:checked`);
            if (selected && parseInt(selected.value) === q.answer) {
                score++;
            }
        });
        document.getElementById("result").innerText = `Your Score: ${score} / ${mcqs.length}`;
    }
</script>

</body>
</html>
